---
import BioonixLogo from "@/assets/bioonix_logo.png";
import NediITLogo from "@/assets/nedi_icon.png";
import GameMindLogo from "@/assets/gamemind_icon.png";
import OnTheCourtLogo from "@/assets/on_the_court.png";
import BruschiRentalsLogo from "@/assets/bruschi_rentals.svg";
import { skillIconMap, type Skill } from "@/lib/skillIconMap";

import { getLangFromUrl, useTranslations } from "../../../i18n/utils";
import ExperienceCard from "./ExperienceCard.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const experiences: ExperienceCardProps[] = [
  {
    title: t("experiences.bruschi-rentals-landing.title"),
    company: t("experiences.bruschi-rentals-landing.company"),
    location: t("experiences.bruschi-rentals-landing.location"),
    startDate: t("experiences.bruschi-rentals-landing.startDate"),
    endDate: t("experiences.bruschi-rentals-landing.endDate"),
    description: t("experiences.bruschi-rentals-landing.description"),
    logo: BruschiRentalsLogo,
    skills: [
      skillIconMap.typescript,
      skillIconMap.tailwindcss,
      skillIconMap.astro,
    ],
  },
  {
    title: t("experiences.time-tracker.title"),
    company: t("experiences.time-tracker.company"),
    location: t("experiences.time-tracker.location"),
    startDate: t("experiences.time-tracker.startDate"),
    endDate: t("experiences.time-tracker.endDate"),
    description: t("experiences.time-tracker.description"),
    skills: [
      skillIconMap.remix,
      skillIconMap.typescript,
      skillIconMap.tailwindcss,
      skillIconMap.nodejs,
      skillIconMap.electron,
    ],
  },
  {
    title: t("experiences.onthecourt.title"),
    company: t("experiences.onthecourt.company"),
    location: t("experiences.onthecourt.location"),
    startDate: t("experiences.onthecourt.startDate"),
    endDate: t("experiences.onthecourt.endDate"),
    description: t("experiences.onthecourt.description"),
    logo: OnTheCourtLogo,
    skills: [
      skillIconMap.remix,
      skillIconMap.react,
      skillIconMap.typescript,
      skillIconMap.tailwindcss,
      skillIconMap.git,
      skillIconMap.postgresql,
    ],
  },
  {
    title: t("experiences.gamemind.title"),
    company: t("experiences.gamemind.company"),
    location: t("experiences.gamemind.location"),
    startDate: t("experiences.gamemind.startDate"),
    endDate: t("experiences.gamemind.endDate"),
    description: t("experiences.gamemind.description"),
    logo: GameMindLogo,
    skills: [
      skillIconMap.flutter,
      skillIconMap.typescript,
      skillIconMap.nodejs,
      skillIconMap.react,
      skillIconMap.tailwindcss,
      skillIconMap.git,
      skillIconMap.postgresql,
    ],
  },
  {
    title: t("experiences.bioonix.title"),
    company: t("experiences.bioonix.company"),
    location: t("experiences.bioonix.location"),
    startDate: t("experiences.bioonix.startDate"),
    endDate: t("experiences.bioonix.endDate"),
    description: t("experiences.bioonix.description"),
    logo: BioonixLogo,
    skills: [
      skillIconMap.angular,
      skillIconMap.nestjs,
      skillIconMap.postgresql,
      skillIconMap.tailwindcss,
      skillIconMap.typescript,
      skillIconMap.react,
      skillIconMap.nextjs,
      skillIconMap.nodejs,
      skillIconMap.git,
    ],
  },
  {
    title: t("experiences.eurocambios.title"),
    company: t("experiences.eurocambios.company"),
    location: t("experiences.eurocambios.location"),
    startDate: t("experiences.eurocambios.startDate"),
    endDate: t("experiences.eurocambios.endDate"),
    description: t("experiences.eurocambios.description"),
    skills: [
      skillIconMap.nodejs,
      skillIconMap.typescript,
      skillIconMap.postgresql,
      skillIconMap.git,
    ],
  },
  {
    title: t("experiences.nediit.title"),
    company: t("experiences.nediit.company"),
    location: t("experiences.nediit.location"),
    startDate: t("experiences.nediit.startDate"),
    endDate: t("experiences.nediit.endDate"),
    description: t("experiences.nediit.description"),
    logo: NediITLogo,
    skills: [
      skillIconMap.react,
      skillIconMap.javascript,
      skillIconMap.git,
      skillIconMap.postgresql,
      skillIconMap.css,
    ],
  },
];

type ExperienceCardProps = {
  title: string;
  company: string;
  location: string;
  startDate: string;
  endDate: string;
  description: readonly string[];
  skills: readonly Skill[];
  logo?: ImageMetadata;
};
---

<section
  class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 p-6"
>
  <div class="min-h-screen p-6">
    <div class="mx-auto max-w-4xl">
      <div class="mb-12 text-center">
        <h1 class="mb-4 text-4xl font-bold text-gray-900">
          {t("experience.title")}
        </h1>
        <p class="text-lg text-gray-600">
          {t("experience.subtitle")}
        </p>
      </div>
      <div class="space-y-8">
        {experiences.map((experience) => <ExperienceCard {...experience} />)}
      </div>
    </div>
  </div>
</section>
